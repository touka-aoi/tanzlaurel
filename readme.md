# メタバース + バーチャルライブサーバー

WebSocketを使ったリアルタイム通信システム。

## TODO

### 完了
- [x] echoback applicationの作成
- [x] ループバックテスト環境構築

### プロトコル層
- [ ] メッセージ型定義（位置同期、チャット、イベント等）
サーバー用にラップする
header定義
- dataType   u8   (1)
  version    u8   (1)
  sessionID  u32  (4)
  seq        u16  (2)
  length     u16  (2)
  timestamp  u32  (4)
-------------------
合計            16

type (u8)
  1: control ( join roomなどのサーバー状態遷移系 )
  2: state ( ロジックにも使用する情報 )
  3: input ( ユーザー入力情報 )
  4: pose ( 見た目情報 )

controlType
- 
dataType
- 

- [ ] シリアライズ形式（Protocol Buffers / FlatBuffers / MessagePack）
- [ ] メッセージバージョニング

### 空間同期
- [ ] 位置・姿勢同期（座標、回転、スケール）
- [ ] 補間/予測（クライアント側Dead Reckoning対応）
- [ ] Interest Management（近くのプレイヤーのみ同期）
- [ ] 空間分割（オクツリー/グリッド）

### アバター/ユーザー
- [ ] 認証・認可（JWT / OAuth）
- [ ] ユーザープロファイル管理
- [ ] アバター状態管理（表情、モーション、装備）
- [ ] プレゼンス（オンライン/オフライン）

### バーチャルライブ特有
- [ ] 演出イベント配信（照明、エフェクト、カメラワーク）
- [ ] タイムライン同期（ライブ進行管理）
- [ ] 観客リアクション集約（ペンライト、エモート）
- [ ] 音声/映像ストリーミング連携（WebRTC / HLS）

### スケーラビリティ
- [ ] 複数Room/ワールド管理
- [ ] サーバー間通信（Redis Pub/Sub等）
- [ ] ロードバランシング
- [ ] ホットスポット分散

### 永続化
- [ ] データベース連携
- [ ] セッション復帰（再接続時の状態復元）
- [ ] イベントログ/リプレイ

### 運用
- [ ] メトリクス/モニタリング
- [ ] レート制限
- [ ] 管理者API（キック、BAN、アナウンス）
